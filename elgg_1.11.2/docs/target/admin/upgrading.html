

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Upgrading Elgg &mdash; Elgg 1.x documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Elgg 1.x documentation" href="../index.html"/>
        <link rel="up" title="Administrator Guides" href="index.html"/>
        <link rel="next" title="Plugins" href="plugins.html"/>
        <link rel="prev" title="Getting Started" href="getting_started.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
        <a href="../index.html"><img src="../_static/elgg_logo.png" alt="Elgg" /></a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/features.html">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html">Bundled plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/license.html">License</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/install.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/development.html">Developer Overview</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Administrator Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Upgrading Elgg</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance.html">Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="cron.html">Cron</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup-restore.html">Backup and Restore</a></li>
<li class="toctree-l2"><a class="reference internal" href="duplicate-installation.html">Duplicate Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-help.html">Getting Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/index.html">Developer Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/dont-modify-core.html">Don&#8217;t Modify Core</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/plugins.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/guidelines.html">Plugin coding guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/accessibility.html">Accessibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/ajax.html">Ajax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/authentication.html">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/context.html">Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/database.html">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/actions.html">Forms + Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/helpers.html">Helper functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/i18n.html">Internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/javascript.html">JavaScript</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/menus.html">Menus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/notifications.html">Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/pagehandler.html">Page handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/page-owner.html">Page ownership</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/permissions-check.html">Permissions Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/settings.html">Plugin settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/river.html">River</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/routing.html">Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/themes.html">Themes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/views.html">Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/widgets.html">Widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/walled-garden.html">Walled Garden</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/web-services.html">Web services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/upgrading.html">Upgrading Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/events-list.html">List of events in core</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/hooks-list.html">List of plugin hooks in core</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Plugin Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/hello_world.html">Hello world</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/indexpage.html">Customizing the Home Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/blog.html">Building a Blog Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/wysiwyg.html">Integrating a Rich Text Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/widget.html">Basic Widget</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Design Docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../design/actions.html">Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/database.html">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/events.html">Events and Plugin Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/i18n.html">Internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/amd.html">AMD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/loggable.html">Loggable</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/index.html">Contributor Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contribute/i18n.html">Translations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/issues.html">Reporting Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/code.html">Writing Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/docs.html">Writing Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/docs.html#internationalizing-documentation">Internationalizing documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/money.html">Becoming a Financial Supporter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/releases.html">Release Process Workflow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/index.html">Appendix</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../appendix/faqs.html">FAQs and Other Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/roadmap.html">Roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/releases.html">Release Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/support.html">Support policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/history.html">History</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Elgg</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Administrator Guides</a> &raquo;</li>
      
    <li>Upgrading Elgg</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/admin/upgrading.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="upgrading-elgg">
<h1>Upgrading Elgg<a class="headerlink" href="#upgrading-elgg" title="Permalink to this headline">¶</a></h1>
<p>Switch a live site to a new version of Elgg.</p>
<p>If you&#8217;ve written custom plugins, you should also read the developer guides for
<a class="reference internal" href="../guides/upgrading.html"><em>information on upgrading plugin code</em></a> for the latest version of Elgg.</p>
<div class="section" id="advice">
<h2>Advice<a class="headerlink" href="#advice" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Back up your database</strong> and code</li>
<li>Mind any version-specific comments below</li>
<li>Upgrade only one minor version at a time (1.6 =&gt; 1.7, then 1.7 =&gt; 1.8)</li>
<li>Try out the new version on a test site before doing an upgrade</li>
<li>Report any problems in plugins to the plugin authors</li>
<li>If you are a plugin author you can <a class="reference external" href="https://github.com/Elgg/Elgg/issues">report any backwards-compatibility issues to GitHub</a></li>
</ul>
</div>
<div class="section" id="basic-instructions">
<h2>Basic instructions<a class="headerlink" href="#basic-instructions" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first"><strong>Back up your database, data directory, and code</strong></p>
</li>
<li><p class="first">Download the new version of Elgg from <a class="reference external" href="http://elgg.org">http://elgg.org</a></p>
</li>
<li><dl class="first docutils">
<dt>Update the files</dt>
<dd><ul class="first last simple">
<li>If doing a patch upgrade (1.9.x), overwrite your existing files with the new version of Elgg</li>
<li>If doing a minor upgrade (1.x), replace the existing core files completely</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Merge any new changes to the rewrite rules</dt>
<dd><ul class="first last simple">
<li>For Apache from <code class="docutils literal"><span class="pre">install/config/htaccess.dist</span></code> into <code class="docutils literal"><span class="pre">.htaccess</span></code></li>
<li>For Nginx from <code class="docutils literal"><span class="pre">install/config/nginx.dist</span></code> into your server configuration (usually inside <code class="docutils literal"><span class="pre">/etc/nginx/sites-enabled</span></code>)</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Merge any new changes from <code class="docutils literal"><span class="pre">settings.example.php</span></code> into <code class="docutils literal"><span class="pre">settings.php</span></code></p>
</li>
<li><p class="first">Visit <a class="reference external" href="http://your-elgg-site.com/upgrade.php">http://your-elgg-site.com/upgrade.php</a></p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Any modifications should have been written within plugins, so that they are not lost on overwriting.
If this is not the case, take care to maintain your modifications.</p>
</div>
</div>
<div class="section" id="from-1-10-to-1-11">
<h2>From 1.10 to 1.11<a class="headerlink" href="#from-1-10-to-1-11" title="Permalink to this headline">¶</a></h2>
<div class="section" id="breaking-changes">
<h3>Breaking changes<a class="headerlink" href="#breaking-changes" title="Permalink to this headline">¶</a></h3>
<p>In versions 1.9 and 1.10, names and values for metadata and annotations were not correctly trimmed
for whitespace. Elgg 1.11 correctly trims these strings and updates the database to correct
existing strings. If your plugin uses metadata or annotations with leading or trailing whitespace,
you will need to update the plugin to trim the names and values. This is especially important if
you are using custom SQL clauses or have hard-coded metastring IDs, since the update might change
metastring IDs.</p>
</div>
</div>
<div class="section" id="from-1-8-to-1-9">
<h2>From 1.8 to 1.9<a class="headerlink" href="#from-1-8-to-1-9" title="Permalink to this headline">¶</a></h2>
<p>Elgg 1.9 is a much lighter upgrade than 1.8 was.</p>
<div class="section" id="id1">
<h3>Breaking changes<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Plugins and themes written for 1.8 are expected to be compatible with 1.9
except as it pertains to comments, discussion replies, and notifications.
Please <a class="reference external" href="https://github.com/Elgg/Elgg/issues">report any backwards compatibility issues</a> besides those just listed.</p>
</div>
<div class="section" id="upgrade-steps">
<h3>Upgrade steps<a class="headerlink" href="#upgrade-steps" title="Permalink to this headline">¶</a></h3>
<p>There are several data migrations involved, so it is especially important that you
<strong>back up your database and data directory</strong> before performing the upgrade.</p>
<p>Download the new version and copy these files from the existing 1.8 site:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">.htaccess</span></code></li>
<li><code class="docutils literal"><span class="pre">engine/settings.php</span></code></li>
<li>any 3rd-party plugin folders in the <code class="docutils literal"><span class="pre">mod</span></code> directory</li>
</ul>
</div></blockquote>
<p>Then replace the old installation directory with the new one. This way you are
guaranteed to get rid of obsolete files which might cause problems if left behind.</p>
<p>Follow the basic instructions listed above.</p>
<p>After you&#8217;ve visited <code class="docutils literal"><span class="pre">upgrade.php</span></code>, go to the admin area of your site.
You should see a notification that you have pending upgrades.
Click the link in the notification bar to view and run the upgrades.</p>
<p>The new notifications system delivers messages via a minutely cron handler.
If you haven&#8217;t done so yet, you will need to <a class="reference internal" href="cron.html"><em>install and configure crontab</em></a>
on your server. If cron jobs are already configured, note that the scope of
available cron periods may have changed and you may need to update your current crontab
to reflect these changes.</p>
</div>
<div class="section" id="time-commitment">
<h3>Time commitment<a class="headerlink" href="#time-commitment" title="Permalink to this headline">¶</a></h3>
<p>Running all of the listed upgrades <a class="reference external" href="https://community.elgg.org/discussion/view/1819798/community-site-upgraded">took about 1 hour and 15 minutes</a>
on the Elgg community site which at the time had to migrate:</p>
<blockquote>
<div><ul class="simple">
<li>~75,000 discussion replies</li>
<li>~75,000 comments</li>
<li>~75,000 data directories</li>
</ul>
</div></blockquote>
<p>You should take this only as a ballpark estimate for your own upgrade.
How long it takes will depend on how large your site is and how powerful your servers are.</p>
</div>
</div>
<div class="section" id="from-1-7-to-1-8">
<h2>From 1.7 to 1.8<a class="headerlink" href="#from-1-7-to-1-8" title="Permalink to this headline">¶</a></h2>
<p>Elgg 1.8 is the biggest leap forward in the development of Elgg since version 1.0.
As such, there is more work to update core and plugins than with previous upgrades.</p>
<div class="section" id="updating-core">
<h3>Updating core<a class="headerlink" href="#updating-core" title="Permalink to this headline">¶</a></h3>
<p>Delete the following core directories (same level as _graphics and engine):</p>
<ul class="simple">
<li>_css</li>
<li>account</li>
<li>admin</li>
<li>dashboard</li>
<li>entities</li>
<li>friends</li>
<li>search</li>
<li>settings</li>
<li>simplecache</li>
<li>views</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you do not delete these directories before an upgrade, you will have problems!</p>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="plugins.html" class="btn btn-neutral float-right" title="Plugins">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="getting_started.html" class="btn btn-neutral" title="Getting Started"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, Various.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a modified version of the <a href="https://github.com/snide/sphinx_rtd_theme">Read the Docs theme</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.x',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
   

</body>
</html>