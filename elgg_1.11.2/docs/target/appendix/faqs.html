

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>FAQs and Other Troubleshooting &mdash; Elgg 1.x documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Elgg 1.x documentation" href="../index.html"/>
        <link rel="up" title="Appendix" href="index.html"/>
        <link rel="next" title="General" href="faqs/general.html"/>
        <link rel="prev" title="Appendix" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
        <a href="../index.html"><img src="../_static/elgg_logo.png" alt="Elgg" /></a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/features.html">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html">Bundled plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/license.html">License</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/install.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/development.html">Developer Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">Administrator Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../admin/getting_started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/upgrading.html">Upgrading Elgg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/plugins.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/performance.html">Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/cron.html">Cron</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/backup-restore.html">Backup and Restore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/duplicate-installation.html">Duplicate Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/getting-help.html">Getting Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/index.html">Developer Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/dont-modify-core.html">Don&#8217;t Modify Core</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/plugins.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/guidelines.html">Plugin coding guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/accessibility.html">Accessibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/ajax.html">Ajax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/authentication.html">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/context.html">Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/database.html">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/actions.html">Forms + Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/helpers.html">Helper functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/i18n.html">Internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/javascript.html">JavaScript</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/menus.html">Menus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/notifications.html">Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/pagehandler.html">Page handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/page-owner.html">Page ownership</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/permissions-check.html">Permissions Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/settings.html">Plugin settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/river.html">River</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/routing.html">Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/themes.html">Themes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/views.html">Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/widgets.html">Widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/walled-garden.html">Walled Garden</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/web-services.html">Web services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/upgrading.html">Upgrading Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/events-list.html">List of events in core</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/hooks-list.html">List of plugin hooks in core</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Plugin Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/hello_world.html">Hello world</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/indexpage.html">Customizing the Home Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/blog.html">Building a Blog Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/wysiwyg.html">Integrating a Rich Text Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/widget.html">Basic Widget</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Design Docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../design/actions.html">Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/database.html">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/events.html">Events and Plugin Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/i18n.html">Internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/amd.html">AMD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/loggable.html">Loggable</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/index.html">Contributor Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contribute/i18n.html">Translations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/issues.html">Reporting Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/code.html">Writing Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/docs.html">Writing Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/docs.html#internationalizing-documentation">Internationalizing documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/money.html">Becoming a Financial Supporter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/releases.html">Release Process Workflow</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Appendix</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">FAQs and Other Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="roadmap.html">Roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html">Release Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="support.html">Support policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="history.html">History</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Elgg</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Appendix</a> &raquo;</li>
      
    <li>FAQs and Other Troubleshooting</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/appendix/faqs.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="faqs-and-other-troubleshooting">
<h1>FAQs and Other Troubleshooting<a class="headerlink" href="#faqs-and-other-troubleshooting" title="Permalink to this headline">¶</a></h1>
<p>Below are some commonly asked questions about Elgg.</p>
<div class="contents local topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#general" id="id3">General</a><ul>
<li><a class="reference internal" href="#plugin-cannot-start-and-has-been-deactivated-or-this-plugin-is-invalid" id="id4">&#8220;Plugin cannot start and has been deactivated&#8221; or &#8220;This plugin is invalid&#8221;</a></li>
<li><a class="reference internal" href="#white-page-wsod" id="id5">White Page (WSOD)</a></li>
<li><a class="reference internal" href="#page-not-found" id="id6">Page not found</a></li>
<li><a class="reference internal" href="#login-token-mismatch" id="id7">Login token mismatch</a></li>
<li><a class="reference internal" href="#form-is-missing-token-or-ts-fields" id="id8">Form is missing __token or __ts fields</a></li>
<li><a class="reference internal" href="#maintenance-mode" id="id9">Maintenance mode</a></li>
<li><a class="reference internal" href="#missing-email" id="id10">Missing email</a></li>
<li><a class="reference internal" href="#server-logs" id="id11">Server logs</a></li>
<li><a class="reference internal" href="#how-does-registration-work" id="id12">How does registration work?</a></li>
<li><a class="reference internal" href="#user-validation" id="id13">User validation</a></li>
<li><a class="reference internal" href="#manually-add-user" id="id14">Manually add user</a></li>
<li><a class="reference internal" href="#i-m-making-or-just-installed-a-new-theme-but-graphics-or-other-elements-aren-t-working" id="id15">I&#8217;m making or just installed a new theme, but graphics or other elements aren&#8217;t working</a></li>
<li><a class="reference internal" href="#changing-profile-fields" id="id16">Changing profile fields</a></li>
<li><a class="reference internal" href="#changing-registration" id="id17">Changing registration</a></li>
<li><a class="reference internal" href="#how-do-i-change-php-settings-using-htaccess" id="id18">How do I change PHP settings using .htaccess?</a></li>
<li><a class="reference internal" href="#https-login-turned-on-accidently" id="id19">HTTPS login turned on accidently</a></li>
<li><a class="reference internal" href="#using-a-test-site" id="id20">Using a test site</a></li>
<li><a class="reference internal" href="#internal-server-error" id="id21">500 - Internal Server Error</a></li>
<li><a class="reference internal" href="#when-i-upload-a-photo-or-change-my-profile-picture-i-get-a-white-screen" id="id22">When I upload a photo or change my profile picture I get a white screen</a></li>
<li><a class="reference internal" href="#css-is-missing" id="id23">CSS is missing</a></li>
<li><a class="reference internal" href="#should-i-edit-the-database-manually" id="id24">Should I edit the database manually?</a></li>
<li><a class="reference internal" href="#internet-explorer-ie-login-problem" id="id25">Internet Explorer (IE) login problem</a></li>
<li><a class="reference internal" href="#emails-don-t-support-non-latin-characters" id="id26">Emails don&#8217;t support non-Latin characters</a></li>
<li><a class="reference internal" href="#session-length" id="id27">Session length</a></li>
<li><a class="reference internal" href="#file-is-missing-an-owner" id="id28">File is missing an owner</a></li>
<li><a class="reference internal" href="#no-images" id="id29">No images</a></li>
<li><a class="reference internal" href="#deprecation-warnings" id="id30">Deprecation warnings</a></li>
<li><a class="reference internal" href="#javascript-not-working" id="id31">Javascript not working</a></li>
</ul>
</li>
<li><a class="reference internal" href="#security" id="id32">Security</a><ul>
<li><a class="reference internal" href="#is-upgrade-php-a-security-concern" id="id33">Is upgrade.php a security concern?</a></li>
<li><a class="reference internal" href="#should-i-delete-install-php" id="id34">Should I delete install.php?</a></li>
<li><a class="reference internal" href="#filtering" id="id35">Filtering</a></li>
</ul>
</li>
<li><a class="reference internal" href="#development" id="id36">Development</a><ul>
<li><a class="reference internal" href="#what-should-i-use-to-edit-php-code" id="id37">What should I use to edit php code</a></li>
<li><a class="reference internal" href="#i-don-t-like-the-wording-of-something-in-elgg-how-do-i-change-it" id="id38">I don&#8217;t like the wording of something in Elgg. How do I change it?</a></li>
<li><a class="reference internal" href="#how-do-i-find-the-code-that-does-x" id="id39">How do I find the code that does x?</a></li>
<li><a class="reference internal" href="#debug-mode" id="id40">Debug mode</a></li>
<li><a class="reference internal" href="#what-events-are-triggered-on-every-page-load" id="id41">What events are triggered on every page load?</a></li>
<li><a class="reference internal" href="#what-variables-are-reserved-by-elgg" id="id42">What variables are reserved by Elgg?</a></li>
<li><a class="reference internal" href="#copy-a-plugin" id="id43">Copy a plugin</a></li>
</ul>
</li>
</ul>
</div>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="general">
<h2><a class="toc-backref" href="#id3">General</a><a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h2>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../admin/getting-help.html"><em>Getting Help</em></a></p>
</div>
<div class="section" id="plugin-cannot-start-and-has-been-deactivated-or-this-plugin-is-invalid">
<h3><a class="toc-backref" href="#id4">&#8220;Plugin cannot start and has been deactivated&#8221; or &#8220;This plugin is invalid&#8221;</a><a class="headerlink" href="#plugin-cannot-start-and-has-been-deactivated-or-this-plugin-is-invalid" title="Permalink to this headline">¶</a></h3>
<p>This error is usually accompanied by more details explaining why the plugin is invalid. This is usually
caused by an incorrectly installed plugin.</p>
<p>If you are installing a plugin called &#8220;test&#8221;, there will be a test directory under mod. In that test directory there needs to be a start.php file: <code class="docutils literal"><span class="pre">/mod/test/start.php</span></code> and a manifest.xml file <code class="docutils literal"><span class="pre">/mod/test/manifest.xml</span></code>.</p>
<dl class="docutils">
<dt>If these files do not exist, it could be caused by:</dt>
<dd><ul class="first last simple">
<li>installing a plugin to the wrong directory</li>
<li>creating a directory under /mod that does not contain a plugin</li>
<li>a bad ftp transfer</li>
<li>unzipping a plugin into an extra directory (myplugin.zip unzips to <code class="docutils literal"><span class="pre">myplugin/myplugin</span></code>)</li>
</ul>
</dd>
</dl>
<p>If you are on a Unix-based host and the files exist in the correct directory, check the permissions. Elgg must have read access to the files and read + execute access on the directories.</p>
</div>
<div class="section" id="white-page-wsod">
<h3><a class="toc-backref" href="#id5">White Page (WSOD)</a><a class="headerlink" href="#white-page-wsod" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>A blank, white page (often called a &#8220;white screen of death&#8221;) means there is a PHP syntax error. There are a few possible causes of this:</dt>
<dd><ul class="first last simple">
<li>corrupted file - try transfering the code again to your server</li>
<li>a call to a php module that was not loaded - this can happen after you install a plugin that requires a specific module.</li>
<li>bad plugin - not all plugins have been written to the same quality so you should be careful which ones you install.</li>
</ul>
</dd>
</dl>
<p>To find where the error is occurring, change the .htaccess file to display errors to the browser. Set display_errors to 1 and load the same page again. You should see a PHP error in your browser. Change the setting back once you&#8217;ve resolved the problem.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are using the Developer&#8217;s Tools plugin, go to its settings page and make sure you have &#8220;Display fatal PHP errors&#8221; enabled.</p>
</div>
<p>If the white screen is due to a bad plugin, remove the latest plugins that you have installed by deleting their directories and then reload the page.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can temporarily disable all plugins by creating an empty file at <code class="docutils literal"><span class="pre">mod/disabled</span></code>. You can then disable the offending module via the administrator tools panel.</p>
</div>
<p>If you are getting a WSOD when performing an action, like logging in or posting a blog, but there are no error messages, it&#8217;s most likely caused by non-printable characters in plugin code. Check the plugin for white spaces/new lines characters after finishing php tag (<code class="docutils literal"><span class="pre">?&gt;</span></code>) and remove them.</p>
</div>
<div class="section" id="page-not-found">
<h3><a class="toc-backref" href="#id6">Page not found</a><a class="headerlink" href="#page-not-found" title="Permalink to this headline">¶</a></h3>
<p>If you have recently installed your Elgg site, the most likely cause for a page not found error is that <code class="docutils literal"><span class="pre">mod_rewrite</span></code> is not setup correctly on your server. There is information in the <a class="reference internal" href="../intro/install.html"><em>Install Troubleshooting</em></a> page on fixing this. The second most likely cause is that your site url in your database is incorrect.</p>
<p>If you&#8217;ve been running your site for a while and suddenly start getting page not found errors, you need to ask yourself what has changed. Have you added any plugins? Did you change your server configuration?</p>
<p>To debug a page not found error:</p>
<ul class="simple">
<li>Confirm that the link leading to the missing page is correct. If not, how is that link being generated?</li>
<li>Confirm that the <code class="docutils literal"><span class="pre">.htaccess</span></code> rewrite rules are being picked up.</li>
</ul>
</div>
<div class="section" id="login-token-mismatch">
<h3><a class="toc-backref" href="#id7">Login token mismatch</a><a class="headerlink" href="#login-token-mismatch" title="Permalink to this headline">¶</a></h3>
<p>If you have to log in twice to your site and the error message after the first attempt says there was a token mismatch error, the URL in Elgg&#8217;s settings does not match the URL used to access it. The most common cause for this is adding or removing the &#8220;www&#8221; when accessing the site. For example, www.elgg.org vs elgg.org. This causes a problem with session handling because of the way that web browsers save cookies.</p>
<p>To fix this, you can add rewrite rules. To redirect from www.elgg.org to elgg.org in Apache, the rules might look like:</p>
<div class="highlight-python"><div class="highlight"><pre>RewriteCond %{HTTP_HOST} .
RewriteCond %{HTTP_HOST} !^elgg\.org
RewriteRule (.*) http://elgg.org/$1 [R=301,L]
</pre></div>
</div>
<p>Redirecting from non-www to www could look like this:</p>
<div class="highlight-python"><div class="highlight"><pre>RewriteCond %{HTTP_HOST} ^elgg\.org
RewriteRule ^(.*)$ http://www.elgg.org/$1 [R=301,L]
</pre></div>
</div>
<p>If you don&#8217;t know how to configure rewrite rules, ask your host for more information.</p>
</div>
<div class="section" id="form-is-missing-token-or-ts-fields">
<h3><a class="toc-backref" href="#id8">Form is missing __token or __ts fields</a><a class="headerlink" href="#form-is-missing-token-or-ts-fields" title="Permalink to this headline">¶</a></h3>
<p>All Elgg actions require a security token, and this error occurs when that token is missing. This is either a problem with your server configuration or with a 3rd party plugin.</p>
<p>If you experience this on a new installation, make sure that your server is properly configured and your rewrite rules are correct. If you experience this on an upgrade, make sure you have updated your rewrite rules either in .htaccess (Apache) or in the server configuration.</p>
<p>If you are experiencing this, disable all 3rd party plugins and try again. Very old plugins for Elgg don&#8217;t use security tokens. If the problem goes away when plugins are disabled, it&#8217;s due to a plugin that should be updated by its author.</p>
</div>
<div class="section" id="maintenance-mode">
<h3><a class="toc-backref" href="#id9">Maintenance mode</a><a class="headerlink" href="#maintenance-mode" title="Permalink to this headline">¶</a></h3>
<p>To take your site temporarily offline, go to Administration -&gt; Utilities -&gt; Maintenance Mode. Complete the form and hit save to disable your site for everyone except admin users.</p>
</div>
<div class="section" id="missing-email">
<h3><a class="toc-backref" href="#id10">Missing email</a><a class="headerlink" href="#missing-email" title="Permalink to this headline">¶</a></h3>
<p>If your users are reporting that validation emails are not showing up, have them check their spam folder. It is possible that the emails coming from your server are being marked as spam. This depends on many factors such as whether your hosting provider has a problem with spammers, how your PHP mail configuration is set up, what mail transport agent your server is using, or your host limiting the number of email that you can send in an hour.</p>
<p>If no one gets email at all, it is quite likely your server is not configured properly for email. Your server needs a program to send email (called a Mail Transfer Agent - MTA) and PHP must be configured to use the MTA.</p>
<p>To quickly check if PHP and an MTA are correctly configured, create a file on your server with the following content:</p>
<div class="code php highlight-python"><div class="highlight"><pre>&lt;?php
$address = &quot;your_email@your_host.com&quot;;

$subject = &#39;Test email.&#39;;

$body = &#39;If you can read this, your email is working.&#39;;

echo &quot;Attempting to email $address...&lt;br /&gt;&quot;;

if (mail($address, $subject, $body)) {
        echo &#39;SUCCESS!  PHP successfully delivered email to your MTA.  If you don\&#39;t see the email in your inbox in a few minutes, there is a problem with your MTA.&#39;;
} else {
        echo &#39;ERROR!  PHP could not deliver email to your MTA.  Check that your PHP settings are correct for your MTA and your MTA will deliver email.&#39;;
}
</pre></div>
</div>
<p>Be sure to replace &#8220;<a class="reference external" href="mailto:your_email&#37;&#52;&#48;your_host&#46;com">your_email<span>&#64;</span>your_host<span>&#46;</span>com</a>&#8221; with your actual email address.  Take care to keep quotes around it!  When you access this page through your web browser, it will attempt to send a test email.  This test will let you know that PHP and your MTA are correctly configured.  If it fails&#8211;either you get an error or you never receive the email&#8211;you will need to do more investigating and possibly contact your service provider.</p>
<p>Fully configuring an MTA and PHP&#8217;s email functionality is beyond the scope of this FAQ and you should search the Internet for more resources on this. Some basic information on php parameters can be found on <a class="reference external" href="http://php.net/manual/en/mail.configuration.php">PHP&#8217;s site</a></p>
</div>
<div class="section" id="server-logs">
<h3><a class="toc-backref" href="#id11">Server logs</a><a class="headerlink" href="#server-logs" title="Permalink to this headline">¶</a></h3>
<p>Most likely you are using Apache as your web server. Warnings and errors are written to a log by the web server and can be useful for debugging problems. You will commonly see two types of log files: access logs and error logs. Information from PHP and Elgg is written to the server error log.</p>
<blockquote>
<div><ul class="simple">
<li>Linux &#8211; The error log is probably in /var/log/httpd or /var/log/apache2.</li>
<li>Windows - It is probably inside your Apache directory.</li>
<li>Mac OS - The error log is probably in /var/log/apache2/error_log</li>
</ul>
</div></blockquote>
<p>If you are using shared hosting without ssh access, your hosting provider may provide a mechanism for obtaining access to your server logs. You will need to ask them about this.</p>
</div>
<div class="section" id="how-does-registration-work">
<h3><a class="toc-backref" href="#id12">How does registration work?</a><a class="headerlink" href="#how-does-registration-work" title="Permalink to this headline">¶</a></h3>
<p>With a default setup, this is how registration works:</p>
<ol class="arabic simple">
<li>User fills out registration form and submits it</li>
<li>User account is created and disabled until validated</li>
<li>Email is sent to user with a link to validate the account</li>
<li>When a user clicks on the link, the account is validated</li>
<li>The user can now log in</li>
</ol>
<p>Failures during this process include the user entering an incorrect email address, the validation email being marked as spam, or a user never bothering to validate the account.</p>
</div>
<div class="section" id="user-validation">
<h3><a class="toc-backref" href="#id13">User validation</a><a class="headerlink" href="#user-validation" title="Permalink to this headline">¶</a></h3>
<p>By default, all users who self-register must validate their accounts through email. If a user has
problems validating an account, you can validate users manually by going to Administration -&gt; Users -&gt; Unvalidated.</p>
<p>You can remove this requirement by deactivating the User Validation by Email plugin.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Removing validation has some consequences: There is no way to know that a user registered with a working email address, and it may leave you system open to spammers.</p>
</div>
</div>
<div class="section" id="manually-add-user">
<h3><a class="toc-backref" href="#id14">Manually add user</a><a class="headerlink" href="#manually-add-user" title="Permalink to this headline">¶</a></h3>
<p>To manually add a user, under the Administer controls go to Users. There you will see a link title &#8220;Add new User&#8221;. After you fill out the information and submit the form, the new user will receive an email with username and password and a reminder to change the password.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Elgg does not force the user to change the password.</p>
</div>
</div>
<div class="section" id="i-m-making-or-just-installed-a-new-theme-but-graphics-or-other-elements-aren-t-working">
<h3><a class="toc-backref" href="#id15">I&#8217;m making or just installed a new theme, but graphics or other elements aren&#8217;t working</a><a class="headerlink" href="#i-m-making-or-just-installed-a-new-theme-but-graphics-or-other-elements-aren-t-working" title="Permalink to this headline">¶</a></h3>
<p>Make sure the theme is at the bottom of the plugin list.</p>
<p>Clear your browser cache and reload the page. To lighten the load on the server, Elgg instructs the browser to rarely load the CSS file. A new theme will completely change the CSS file and a refresh should cause the browser to request the CSS file again.</p>
<p>If you&#8217;re building or modifying a theme, make sure you have disabled the simple and system caches. This can be done by
enabling the Developer Tools plugin, then browsing to Administration -&gt; Develop -&gt; Settings. Once you&#8217;re satisfied with the changes, enable the caches or performance will suffer.</p>
</div>
<div class="section" id="changing-profile-fields">
<h3><a class="toc-backref" href="#id16">Changing profile fields</a><a class="headerlink" href="#changing-profile-fields" title="Permalink to this headline">¶</a></h3>
<p>Within the Administration settings of Elgg is a page for replacing the default profile fields. Elgg by default gives the administrator two choices:</p>
<ul class="simple">
<li>Use the default profile fields</li>
<li>Replace the default with a set of custom profile fields</li>
</ul>
<p>You cannot add new profile fields to the default ones. Adding a new profile field through the replace profile fields option clears the default ones. Before letting in users, it is best to determine what profile fields you want, what field types they should be, and the order they should appear. You cannot change the field type or order or delete fields after they have been created without wiping the entire profile blank.</p>
<p>More flexibility can be gained through plugins. There is at least two plugins on the community site that enable you to have more control over profile fields. The <a class="reference external" href="https://community.elgg.org/plugins/385114">Profile Manager</a> plugin has become quite popular in the Elgg community. It lets you add new profile fields whenever you want, change the order, group profile fields, and add them to registration.</p>
</div>
<div class="section" id="changing-registration">
<h3><a class="toc-backref" href="#id17">Changing registration</a><a class="headerlink" href="#changing-registration" title="Permalink to this headline">¶</a></h3>
<p>The registration process can be changed through a plugin. Everything about registration can be changed: the look and feel, different registration fields, additional validation of the fields, additional steps and so on. These types of changes require some basic knowledge of HTML, CSS, PHP.</p>
<p>Another option is to use the <a class="reference external" href="https://community.elgg.org/plugins/385114">Profile Manager</a> plugin that lets you add fields to both user profiles and the registration form.</p>
<dl class="docutils">
<dt>Create the plugin skeleton</dt>
<dd><a class="reference internal" href="../guides/plugins/plugin-skeleton.html"><em>Plugin skeleton</em></a></dd>
<dt>Changing registration display</dt>
<dd>Override the <code class="docutils literal"><span class="pre">account/forms/register</span></code> view</dd>
<dt>Changing the registration action handler</dt>
<dd>You can write your own action to create the user&#8217;s account</dd>
</dl>
</div>
<div class="section" id="how-do-i-change-php-settings-using-htaccess">
<h3><a class="toc-backref" href="#id18">How do I change PHP settings using .htaccess?</a><a class="headerlink" href="#how-do-i-change-php-settings-using-htaccess" title="Permalink to this headline">¶</a></h3>
<p>You may want to change php settings in your <code class="docutils literal"><span class="pre">.htaccess</span></code> file. This is especially true if your hosting provider does not give you access to the server&#8217;s <code class="docutils literal"><span class="pre">php.ini</span></code> file. The variables could be related to file upload size limits, security, session length, or any number of other php attributes. For examples of how to do this, see the <a class="reference external" href="http://us2.php.net/configuration.changes">PHP documentation</a> on this.</p>
</div>
<div class="section" id="https-login-turned-on-accidently">
<h3><a class="toc-backref" href="#id19">HTTPS login turned on accidently</a><a class="headerlink" href="#https-login-turned-on-accidently" title="Permalink to this headline">¶</a></h3>
<p>If you have turned on HTTPS login but do not have SSL configured, you are now locked out of your Elgg install. To turn off this configuration parameter, you will need to edit your database. Use a tool like phpMyAdmin to view your database. Select the <code class="docutils literal"><span class="pre">config</span></code> table and delete the row that has the name <code class="docutils literal"><span class="pre">https_login</span></code>.</p>
</div>
<div class="section" id="using-a-test-site">
<h3><a class="toc-backref" href="#id20">Using a test site</a><a class="headerlink" href="#using-a-test-site" title="Permalink to this headline">¶</a></h3>
<p>It is recommended to always try out new releases or new plugins on a test site before running them on a production site (a site with actual users). The easiest way to do this is to maintain a separate install of Elgg with dummy accounts. When testing changes it is important to use dummy accounts that are not admins to test what your users will see.</p>
<p>A more realistic test is to mirror the content from your production site to your test site. Following the instructions for <a class="reference internal" href="../admin/duplicate-installation.html"><em>duplicating a site</em></a>. Then make sure you prevent emails from being sent to your users. You could write a small plugin that redirects all email to your own account (be aware of plugins that include their own custom email sending code so you&#8217;ll have to modify those plugins). After this is done you can view all of the content to make sure the upgrade or new plugin is functioning as desired and is not breaking anything. If this process sounds overwhelming, please stick with running a simple test site.</p>
</div>
<div class="section" id="internal-server-error">
<h3><a class="toc-backref" href="#id21">500 - Internal Server Error</a><a class="headerlink" href="#internal-server-error" title="Permalink to this headline">¶</a></h3>
<div class="section" id="what-is-it">
<h4>What is it?<a class="headerlink" href="#what-is-it" title="Permalink to this headline">¶</a></h4>
<p>A <strong>500 - Internal Server Error</strong> means the web server experienced a problem serving a request.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#5xx_Server_Error">The Wikipedia page on HTTP status codes</a></p>
</div>
</div>
<div class="section" id="possible-causes">
<h4>Possible causes<a class="headerlink" href="#possible-causes" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Web server configuration</dt>
<dd>The most common cause for this is an incorrectly configured server. If you edited the <code class="docutils literal"><span class="pre">.htaccess</span></code> file and added something incorrect, Apache will send a 500 error.</dd>
<dt>Permissions on files</dt>
<dd>It could also be a permissions problem on a file. Apache needs to be able to read Elgg&#8217;s files. Using permissions 755 on directories and 644 on files will allow Apache to read the files.</dd>
</dl>
</div>
</div>
<div class="section" id="when-i-upload-a-photo-or-change-my-profile-picture-i-get-a-white-screen">
<h3><a class="toc-backref" href="#id22">When I upload a photo or change my profile picture I get a white screen</a><a class="headerlink" href="#when-i-upload-a-photo-or-change-my-profile-picture-i-get-a-white-screen" title="Permalink to this headline">¶</a></h3>
<p>Most likely you don&#8217;t have the PHP GD library installed or configured properly. You may need assistance from the administrator of your server.</p>
</div>
<div class="section" id="css-is-missing">
<h3><a class="toc-backref" href="#id23">CSS is missing</a><a class="headerlink" href="#css-is-missing" title="Permalink to this headline">¶</a></h3>
<div class="section" id="wrong-url">
<h4>Wrong URL<a class="headerlink" href="#wrong-url" title="Permalink to this headline">¶</a></h4>
<p>Sometimes people install Elgg so that the base URL is <code class="docutils literal"><span class="pre">localhost</span></code> and then try to view the site using a hostname. In this case, the browser won&#8217;t be able to load the CSS file. Try viewing the source of the web page and copying the link for the CSS file. Paste that into your browser. If you get a 404 error, it is likely this is your problem. You will need to change the base URL of your site.</p>
</div>
<div class="section" id="syntax-error">
<h4>Syntax error<a class="headerlink" href="#syntax-error" title="Permalink to this headline">¶</a></h4>
<p>Elgg stores its CSS as PHP code to provide flexibility and power. If there is a syntax error, the CSS file served to the browser may be blank. Disabling non-bundled plugins is the recommended first step.</p>
</div>
<div class="section" id="rewrite-rules-errors">
<h4>Rewrite rules errors<a class="headerlink" href="#rewrite-rules-errors" title="Permalink to this headline">¶</a></h4>
<p>A bad <code class="docutils literal"><span class="pre">.htaccess</span></code> file could also result in a 404 error when requesting the CSS file. This could happen when doing an upgrade and forgetting to also upgrade <code class="docutils literal"><span class="pre">.htaccess</span></code>.</p>
</div>
</div>
<div class="section" id="should-i-edit-the-database-manually">
<h3><a class="toc-backref" href="#id24">Should I edit the database manually?</a><a class="headerlink" href="#should-i-edit-the-database-manually" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">No, you should never manually edit the database!</p>
</div>
<div class="section" id="will-editing-the-database-manually-break-my-site">
<h4>Will editing the database manually break my site?<a class="headerlink" href="#will-editing-the-database-manually-break-my-site" title="Permalink to this headline">¶</a></h4>
<p>Yes.</p>
</div>
<div class="section" id="can-i-add-extra-fields-to-tables-in-the-database">
<h4>Can I add extra fields to tables in the database?<a class="headerlink" href="#can-i-add-extra-fields-to-tables-in-the-database" title="Permalink to this headline">¶</a></h4>
<p>(AKA: I don&#8217;t understand the Elgg <a class="reference internal" href="../design/database.html"><em>data model</em></a> so I&#8217;m going to add columns. Will you help?)</p>
<p>No, this is a bad idea. Learn the <a class="reference internal" href="../design/database.html"><em>data model</em></a> and you will see that unless it&#8217;s a very specific and highly customized installation, you can do everything you need within Elgg&#8217;s current data model.</p>
</div>
<div class="section" id="i-want-to-remove-users-can-t-i-just-delete-them-from-the-elgg-users-entity-table">
<h4>I want to remove users. Can&#8217;t I just delete them from the elgg_users_entity table?<a class="headerlink" href="#i-want-to-remove-users-can-t-i-just-delete-them-from-the-elgg-users-entity-table" title="Permalink to this headline">¶</a></h4>
<p>No, it will corrupt your database. Delete them through the site.</p>
</div>
<div class="section" id="i-want-to-remove-spam-can-t-i-just-search-and-delete-it-from-the-elgg-objects-entity-table">
<h4>I want to remove spam. Can&#8217;t I just search and delete it from the elgg_objects_entity table?<a class="headerlink" href="#i-want-to-remove-spam-can-t-i-just-search-and-delete-it-from-the-elgg-objects-entity-table" title="Permalink to this headline">¶</a></h4>
<p>No, it will corrupt your database. Delete it through the site.</p>
</div>
<div class="section" id="someone-on-the-community-site-told-me-to-edit-the-database-manually-should-i">
<h4>Someone on the community site told me to edit the database manually. Should I?<a class="headerlink" href="#someone-on-the-community-site-told-me-to-edit-the-database-manually-should-i" title="Permalink to this headline">¶</a></h4>
<p>Who was it? Is it someone experienced with Elgg, like one of the core developers or a well-known plugin author? Did he or she give you clear and specific instructions on what to edit? If you don&#8217;t know who it is, or if you can&#8217;t understand or aren&#8217;t comfortable following the instructions, do not edit the database manually.</p>
</div>
<div class="section" id="i-know-php-and-mysql-and-have-a-legitimate-reason-to-edit-the-database-is-it-okay-to-manually-edit-the-database">
<h4>I know PHP and MySQL and have a legitimate reason to edit the database. Is it okay to manually edit the database?<a class="headerlink" href="#i-know-php-and-mysql-and-have-a-legitimate-reason-to-edit-the-database-is-it-okay-to-manually-edit-the-database" title="Permalink to this headline">¶</a></h4>
<p>Make sure you understand Elgg&#8217;s <a class="reference internal" href="../design/database.html"><em>data model</em></a> and schema first. Make a backup, edit carefully, then test copiously.</p>
</div>
</div>
<div class="section" id="internet-explorer-ie-login-problem">
<h3><a class="toc-backref" href="#id25">Internet Explorer (IE) login problem</a><a class="headerlink" href="#internet-explorer-ie-login-problem" title="Permalink to this headline">¶</a></h3>
<div class="section" id="canonical-url">
<h4>Canonical URL<a class="headerlink" href="#canonical-url" title="Permalink to this headline">¶</a></h4>
<p>IE does not like working with sites that use both <a class="reference external" href="http://example.org">http://example.org</a> and <a class="reference external" href="http://www.example.org">http://www.example.org</a>. It stores multiple cookies and this causes problems. Best to only use one base URL. For details on how to do this see Login token mismatch error.</p>
</div>
<div class="section" id="chrome-frame">
<h4>Chrome Frame<a class="headerlink" href="#chrome-frame" title="Permalink to this headline">¶</a></h4>
<p>Using the chrome frame within IE can break the login process.</p>
</div>
</div>
<div class="section" id="emails-don-t-support-non-latin-characters">
<h3><a class="toc-backref" href="#id26">Emails don&#8217;t support non-Latin characters</a><a class="headerlink" href="#emails-don-t-support-non-latin-characters" title="Permalink to this headline">¶</a></h3>
<p>In order to support non-Latin characters, (such as Cyrillic or Chinese) Elgg requires <a class="reference external" href="http://uk.php.net/manual/en/mbstring.installation.php">multibyte string support</a> to be compiled into PHP.</p>
<p>On many installs (e.g. Debian &amp; Ubuntu) this is turned on by default. If it is not, you need to turn it on (or recompile PHP to include it). To check whether your server supports multibyte strings, check <a class="reference external" href="http://php.net/manual/en/function.phpinfo.php">phpinfo</a>.</p>
</div>
<div class="section" id="session-length">
<h3><a class="toc-backref" href="#id27">Session length</a><a class="headerlink" href="#session-length" title="Permalink to this headline">¶</a></h3>
<p>Session length is controlled by your php configuration. You will first need to locate your <code class="docutils literal"><span class="pre">php.ini</span></code> file. In that file will be several session variables. A complete list and what they do can be found in the <a class="reference external" href="http://php.net/manual/en/session.configuration.php">php manual</a>.</p>
</div>
<div class="section" id="file-is-missing-an-owner">
<h3><a class="toc-backref" href="#id28">File is missing an owner</a><a class="headerlink" href="#file-is-missing-an-owner" title="Permalink to this headline">¶</a></h3>
<p>There are three causes for this error. You could have an entity in your database that has an <code class="docutils literal"><span class="pre">owner_guid</span></code> of <code class="docutils literal"><span class="pre">0</span></code>. This should be extremely rare and may only occur if your database/server crashes during a write operation.</p>
<p>The second cause would be an entity where the owner no longer exists. This could occur if a plugin is turned off that was involved in the creation of the entity and then the owner is deleted but the delete operation failed (because the plugin is turned off). If you can figure out entity is causing this, look in your <code class="docutils literal"><span class="pre">entities</span></code> table and change the <code class="docutils literal"><span class="pre">owner_guid</span></code> to your own and then you can delete the entity through Elgg.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Reed the section &#8220;Should I edit the database manually?&#8221;. Be very carefull when editing the database directly. It can break your site. <strong>Always</strong> make a backup before doing this.</p>
</div>
<p>The third cause is a user not having a username. This also indicates a database problem as this should not be possible. If it does occur, you could see this error when viewing a list of users (such as with the Members plugin). To fix, check your <code class="docutils literal"><span class="pre">users_entity</span></code> table for users without a username and if so, create a fake a username for that person. You should probably then delete the user through Elgg.</p>
<div class="section" id="fixes">
<h4>Fixes<a class="headerlink" href="#fixes" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="https://community.elgg.org/plugins/438616">Database Validator</a> plugin will check your database for these causes and provide an option to fix them. Be sure to backup the database before you try the fix option.</p>
</div>
</div>
<div class="section" id="no-images">
<h3><a class="toc-backref" href="#id29">No images</a><a class="headerlink" href="#no-images" title="Permalink to this headline">¶</a></h3>
<p>If profile images, group images, or other files have stopped working on your site it is likely due to a misconfiguration, especially if you have migrated to a new server.</p>
<p>These are the most common misconfigurations that cause images and other files to stop working.</p>
<div class="section" id="wrong-path-for-data-directory">
<h4>Wrong path for data directory<a class="headerlink" href="#wrong-path-for-data-directory" title="Permalink to this headline">¶</a></h4>
<p>Make sure the data directory&#8217;s path is correct in the Site Administration admin area. It should have a trailing slash.</p>
</div>
<div class="section" id="wrong-permissions-on-the-data-directory">
<h4>Wrong permissions on the data directory<a class="headerlink" href="#wrong-permissions-on-the-data-directory" title="Permalink to this headline">¶</a></h4>
<p>Check the permissions for the data directory. The data directory should be readable and writeable by the web server user.</p>
</div>
<div class="section" id="different-timezone">
<h4>Different timezone<a class="headerlink" href="#different-timezone" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This only applies to Elgg versions before 1.9</p>
</div>
<p>If you migrated servers or upgraded PHP, check that PHP&#8217;s timezone settings are the same between the old and the new. If you cannot or don&#8217;t want to change the system-wide <code class="docutils literal"><span class="pre">php.ini</span></code> file, you can put the following at the top of <code class="docutils literal"><span class="pre">engine/settings.php</span></code>:</p>
<div class="code php highlight-python"><div class="highlight"><pre><span class="n">date_default_timezone_set</span><span class="p">(</span><span class="s">&#39;MY_TIME_ZONE&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal"><span class="pre">MY_TIME_ZONE</span></code> is a valid <a class="reference external" href="http://php.net/manual/en/timezones.php">PHP timezone</a>.</p>
</div>
<div class="section" id="migrated-installation-with-new-data-directory-location">
<h4>Migrated installation with new data directory location<a class="headerlink" href="#migrated-installation-with-new-data-directory-location" title="Permalink to this headline">¶</a></h4>
<p>If you migrated an installation and need to change your data directory path, be sure to update the SQL for the filestore location as documented in the <a class="reference internal" href="../admin/duplicate-installation.html"><em>Duplicate Installation</em></a> instructions.</p>
</div>
</div>
<div class="section" id="deprecation-warnings">
<h3><a class="toc-backref" href="#id30">Deprecation warnings</a><a class="headerlink" href="#deprecation-warnings" title="Permalink to this headline">¶</a></h3>
<p>If you are seeing many deprecation warnings that say things like</p>
<div class="code highlight-python"><div class="highlight"><pre>Deprecated in 1.7: extend_view() was deprecated by elgg_extend_view()!
</pre></div>
</div>
<p>then you are using a plugin that was written for an older version of Elgg. This means the plugin is using functions that are scheduled to be removed in a future version of Elgg. You can ask the plugin developer if the plugin will be updated or you can update the plugin yourself. If neither of those are likely to happen, you should not use that plugin.</p>
</div>
<div class="section" id="javascript-not-working">
<h3><a class="toc-backref" href="#id31">Javascript not working</a><a class="headerlink" href="#javascript-not-working" title="Permalink to this headline">¶</a></h3>
<p>If the user hover menu stops working or you cannot dismiss system messages, that means JavaScript is broken on your site. This usually due to a plugin having bad JavaScript code. You should find the plugin causing the problem and disable it. You can do this be disabling non-bundled plugins one at a time until the problem goes away. Another approach is disabling all non-bundled plugins and then enabling them one by one until the problem occurs again.</p>
<p>Most web browsers will give you a hint as to what is breaking the JavaScript code. They often have a console for JavaScript errors or an advanced mode for displaying errors. Once you see the error message, you may have an easier time locating the problem.</p>
</div>
</div>
<div class="section" id="security">
<h2><a class="toc-backref" href="#id32">Security</a><a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h2>
<div class="section" id="is-upgrade-php-a-security-concern">
<h3><a class="toc-backref" href="#id33">Is upgrade.php a security concern?</a><a class="headerlink" href="#is-upgrade-php-a-security-concern" title="Permalink to this headline">¶</a></h3>
<p>Upgrade.php is a file used to run code and database upgrades. It is in the root of the directory and doesn&#8217;t require a logged in account to access. On a fully upgraded site, running the file will only reset the caches and exit, so this is not a security concern.</p>
<p>If you are still concerned, you can either delete, move, or change permissions on the file until you need to upgrade.</p>
</div>
<div class="section" id="should-i-delete-install-php">
<h3><a class="toc-backref" href="#id34">Should I delete install.php?</a><a class="headerlink" href="#should-i-delete-install-php" title="Permalink to this headline">¶</a></h3>
<p>This file is used to install Elgg and doesn&#8217;t need to be deleted. The file checks if Elgg is already installed and forwards the user to the front page if it is.</p>
</div>
<div class="section" id="filtering">
<h3><a class="toc-backref" href="#id35">Filtering</a><a class="headerlink" href="#filtering" title="Permalink to this headline">¶</a></h3>
<p>Filtering is used in Elgg to make <a class="reference external" href="http://en.wikipedia.org/wiki/Cross-site_scripting">XSS</a> attacks more difficult. The purpose of the filtering is to remove Javascript and other dangerous input from users.</p>
<p>Filtering is performed through the function <code class="docutils literal"><span class="pre">filter_tags()</span></code>. This function takes in a string and returns a filtered string. It triggers a <em>validate</em>, <em>input</em> <a class="reference internal" href="../design/events.html#design-events-plugin-hooks"><span>plugin hook</span></a>. By default Elgg comes with the htmLawed filtering code as a plugin. Developers can drop in any additional or replacement filtering code as a plugin.</p>
<p>The <code class="docutils literal"><span class="pre">filter_tags()</span></code> function is called on any user input as long as the input is obtained through a call to <code class="docutils literal"><span class="pre">get_input()</span></code>. If for some reason a developer did not want to perform the default filtering on some user input, the <code class="docutils literal"><span class="pre">get_input()</span></code> function has a parameter for turning off filtering.</p>
</div>
</div>
<div class="section" id="development">
<h2><a class="toc-backref" href="#id36">Development</a><a class="headerlink" href="#development" title="Permalink to this headline">¶</a></h2>
<div class="section" id="what-should-i-use-to-edit-php-code">
<h3><a class="toc-backref" href="#id37">What should I use to edit php code</a><a class="headerlink" href="#what-should-i-use-to-edit-php-code" title="Permalink to this headline">¶</a></h3>
<p>There are two main options: text editor or <a class="reference external" href="http://en.wikipedia.org/wiki/Integrated_development_environment">integrated development environment</a> (IDE).</p>
<div class="section" id="text-editor">
<h4>Text Editor<a class="headerlink" href="#text-editor" title="Permalink to this headline">¶</a></h4>
<p>If you are new to software development or do not have much experience with IDEs, using a text editor will get you up and running the quickest. At a minimum, you will want one that does syntax highlighting to make the code easier to read. If you think you might submit patches to the bug tracker, you will want to make sure that your text editor does not change line endings. If you are using Windows, <a class="reference external" href="http://notepad-plus-plus.org/">Notepad++</a> is a good choice. If you are on a Mac, <a class="reference external" href="http://www.barebones.com/products/textwrangler/index.html">TextWrangler</a> is a popular choice. You could also give <a class="reference external" href="http://macromates.com/">TextMate</a> a try.</p>
</div>
<div class="section" id="integrated-development-environment">
<h4>Integrated Development Environment<a class="headerlink" href="#integrated-development-environment" title="Permalink to this headline">¶</a></h4>
<p>An IDE does just what it&#8217;s name implies: it includes a set of tools that you would normally use separately. Most IDEs will include source code control which will allow you to directly commit and update your code from your cvs repository. It may have an FTP client built into it to make the transfer of files to a remote server easier. It will have syntax checking to catch errors before you try to execute the code on a server.</p>
<p>The two most popular free IDEs for PHP developers are <a class="reference external" href="http://www.eclipse.org/">Eclipse</a> and <a class="reference external" href="http://netbeans.org/">NetBeans</a>. Eclipse has two different plugins for working with PHP code: <a class="reference external" href="http://www.eclipse.org/pdt/">PDT</a> and <a class="reference external" href="http://www.phpeclipse.com/">PHPEclipse</a>.</p>
</div>
</div>
<div class="section" id="i-don-t-like-the-wording-of-something-in-elgg-how-do-i-change-it">
<h3><a class="toc-backref" href="#id38">I don&#8217;t like the wording of something in Elgg. How do I change it?</a><a class="headerlink" href="#i-don-t-like-the-wording-of-something-in-elgg-how-do-i-change-it" title="Permalink to this headline">¶</a></h3>
<p>The best way to do this is with a plugin.</p>
<div class="section" id="create-the-plugin-skeleton">
<h4>Create the plugin skeleton<a class="headerlink" href="#create-the-plugin-skeleton" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="../guides/plugins/plugin-skeleton.html"><em>Plugin skeleton</em></a></p>
</div>
<div class="section" id="locate-the-string-that-you-want-to-change">
<h4>Locate the string that you want to change<a class="headerlink" href="#locate-the-string-that-you-want-to-change" title="Permalink to this headline">¶</a></h4>
<p>All the strings that a user sees should be in the <code class="docutils literal"><span class="pre">/languages</span></code> directory or in a plugin&#8217;s languages directory (<code class="docutils literal"><span class="pre">/mod/&lt;plugin</span> <span class="pre">name&gt;/languages</span></code>). This is done so that it is easy to change what language Elgg uses. For more information on this see the developer documentation on <a class="reference internal" href="../guides/i18n.html"><em>Internationalization</em></a> .</p>
<p>To find the string use <code class="docutils literal"><span class="pre">grep</span></code> or a text editor that provides searching through files to locate the string. (A good text editor for Windows is <a class="reference external" href="http://notepad-plus-plus.org/">Notepad++</a> ) Let&#8217;s say we want to change the string &#8220;Add friend&#8221; to &#8220;Make a new friend&#8221;. The <code class="docutils literal"><span class="pre">grep</span></code> command to find this string would be <code class="docutils literal"><span class="pre">grep</span> <span class="pre">-r</span> <span class="pre">&quot;Add</span> <span class="pre">friend&quot;</span> <span class="pre">*</span></code>. Using <a class="reference external" href="http://notepad-plus-plus.org/">Notepad++</a> , you would use the &#8220;Find in files&#8221; command. You would search for the string, set the filter to <code class="docutils literal"><span class="pre">*.php</span></code>, set the directory to the base directory of Elgg, and make sure it searches all subdirectories. You might want to set it to be case sensitive also.</p>
<p>You should locate the string &#8220;Add friend&#8221; in <code class="docutils literal"><span class="pre">/languages/en.php</span></code>. You should see something like this in the file:</p>
<div class="code php highlight-python"><div class="highlight"><pre>&#39;friend:add&#39; =&gt; &quot;Add friend&quot;,
</pre></div>
</div>
<p>This means every time Elgg sees <code class="docutils literal"><span class="pre">friend:add</span></code> it replaces it with &#8220;Add friend&#8221;. We want to change the definition of <code class="docutils literal"><span class="pre">friend:add</span></code>.</p>
</div>
<div class="section" id="override-the-string">
<h4>Override the string<a class="headerlink" href="#override-the-string" title="Permalink to this headline">¶</a></h4>
<p>To override this definition, we will add a languages file to the plugin that we built in the first step.</p>
<ol class="arabic simple">
<li>Create a new directory: <code class="docutils literal"><span class="pre">/mod/&lt;your</span> <span class="pre">plugin</span> <span class="pre">name&gt;/languages</span></code></li>
<li>Create a file in that directory called <code class="docutils literal"><span class="pre">en.php</span></code></li>
<li>Add these lines to that file</li>
</ol>
<div class="code php highlight-python"><div class="highlight"><pre>&lt;?php

return array(
   &#39;friend:add&#39; =&gt; &#39;Make a new friend&#39;,
);
</pre></div>
</div>
<p>Make sure that you do not have any spaces or newlines before the <code class="docutils literal"><span class="pre">&lt;?php</span></code>.</p>
<p>You&#8217;re done now and should be able to enable the plugin and see the change. If you are override the language of a plugin, make sure your plugin is loaded after the one you are trying to modify. The loading order is determined in the Tools Administration page of the admin section. As you find more things that you&#8217;d like to change, you can keep adding them to this plugin.</p>
</div>
</div>
<div class="section" id="how-do-i-find-the-code-that-does-x">
<h3><a class="toc-backref" href="#id39">How do I find the code that does x?</a><a class="headerlink" href="#how-do-i-find-the-code-that-does-x" title="Permalink to this headline">¶</a></h3>
<p>The best way to find the code that does something that you would like to change is to use <code class="docutils literal"><span class="pre">grep</span></code> or a similar search tool. If you do not have <code class="docutils literal"><span class="pre">grep</span></code> as a part of your operating system, you will want to install a grep tool or use a text-editor/IDE that has good searching in files. <a class="reference external" href="http://notepad-plus-plus.org/">Notepad++</a> is a good choice for Windows users. <a class="reference external" href="http://www.eclipse.org/">Eclipse</a> with PHP and <a class="reference external" href="http://netbeans.org/">NetBeans</a> are good choices for any platform.</p>
<div class="section" id="string-example">
<h4>String Example<a class="headerlink" href="#string-example" title="Permalink to this headline">¶</a></h4>
<p>Let&#8217;s say that you want to find where the <em>Log In</em> box code is located. A string from the <em>Log In</em> box that should be fairly unique is <code class="docutils literal"><span class="pre">Remember</span> <span class="pre">me</span></code>. <code class="docutils literal"><span class="pre">Grep</span></code> for that string. You will find that it is only used in the <code class="docutils literal"><span class="pre">en.php</span></code> file in the <code class="docutils literal"><span class="pre">/languages</span></code> directory. There it is used to define the <a class="reference internal" href="../guides/i18n.html"><em>Internationalization</em></a> string <code class="docutils literal"><span class="pre">user:persistent</span></code>. <code class="docutils literal"><span class="pre">Grep</span></code> for that string now. You will find it in two places: the same <code class="docutils literal"><span class="pre">en.php</span></code> language file and in <code class="docutils literal"><span class="pre">/views/default/forms/login.php</span></code>. The latter defines the html code that makes up the <em>Log In</em> box.</p>
</div>
<div class="section" id="action-example">
<h4>Action Example<a class="headerlink" href="#action-example" title="Permalink to this headline">¶</a></h4>
<p>Let&#8217;s say that you want to find the code that is run when a user clicks on the <em>Save</em> button when arranging widgets on a profile page. View the Profile page for a test user. Use Firebug to drill down through the html of the page until you come to the action of the edit widgets form. You&#8217;ll see the url from the base is <code class="docutils literal"><span class="pre">action/widgets/move</span></code>.</p>
<p><code class="docutils literal"><span class="pre">Grep</span></code> on <code class="docutils literal"><span class="pre">widgets/move</span></code> and two files are returned. One is the JavaScript code for the widgets : <code class="docutils literal"><span class="pre">/js/lib/ui.widgets.js</span></code>. The other one, <code class="docutils literal"><span class="pre">/engine/lib/widgets.php</span></code>, is where the action is registered using <code class="docutils literal"><span class="pre">elgg_register_action('widgets/reorder')</span></code>. You may not be familiar with that function in which case, you should look it up at the API reference. Do a search on the function and it returns the documentation on the function. This tells you that the action is in the default location since a file location was not specified. The default location for actions is <code class="docutils literal"><span class="pre">/actions</span></code> so you will find the file at <code class="docutils literal"><span class="pre">/actions/widgets/move.php</span></code>.</p>
</div>
</div>
<div class="section" id="debug-mode">
<h3><a class="toc-backref" href="#id40">Debug mode</a><a class="headerlink" href="#debug-mode" title="Permalink to this headline">¶</a></h3>
<p>During the installation process you might have noticed a checkbox that controlled whether debug mode was turned on or off. This setting can also be changed on the Site Administration page. Debug mode writes a lot of extra data to your php log. For example, when running in this mode every query to the database is written to your logs. It may be useful for debugging a problem though it can produce an overwhelming amount of data that may not be related to the problem at all. You may want to experiment with this mode to understand what it does, but make sure you run Elgg in normal mode on a production server.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Because of the amount of data being logged, don&#8217;t enable this on a production server as it can fill up the log files really quick.</p>
</div>
<div class="section" id="what-goes-into-the-log-in-debug-mode">
<h4>What goes into the log in debug mode?<a class="headerlink" href="#what-goes-into-the-log-in-debug-mode" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>All database queries</li>
<li>Database query profiling</li>
<li>Page generation time</li>
<li>Number of queries per page</li>
<li>List of plugin language files</li>
<li>Additional errors/warnings compared to normal mode (it&#8217;s very rare for these types of errors to be related to any problem that you might be having)</li>
</ul>
</div>
<div class="section" id="what-does-the-data-look-like">
<h4>What does the data look like?<a class="headerlink" href="#what-does-the-data-look-like" title="Permalink to this headline">¶</a></h4>
<div class="code highlight-python"><div class="highlight"><pre>[07-Mar-2009 14:27:20] Query cache invalidated
[07-Mar-2009 14:27:20] ** GUID:1 loaded from DB
[07-Mar-2009 14:27:20] SELECT * from elggentities where guid=1 and ( (1 = 1)  and enabled=&#39;yes&#39;) results cached
[07-Mar-2009 14:27:20] SELECT guid from elggsites_entity where guid = 1 results cached
[07-Mar-2009 14:27:20] Query cache invalidated
[07-Mar-2009 14:27:20] ** GUID:1 loaded from DB
[07-Mar-2009 14:27:20] SELECT * from elggentities where guid=1 and ( (1 = 1)  and enabled=&#39;yes&#39;) results cached
[07-Mar-2009 14:27:20] ** GUID:1 loaded from DB
[07-Mar-2009 14:27:20] SELECT * from elggentities where guid=1 and ( (1 = 1)  and enabled=&#39;yes&#39;) results returned from cache
[07-Mar-2009 14:27:20] ** Sub part of GUID:1 loaded from DB
[07-Mar-2009 14:27:20] SELECT * from elggsites_entity where guid=1 results cached
[07-Mar-2009 14:27:20] Query cache invalidated
[07-Mar-2009 14:27:20] DEBUG: 2009-03-07 14:27:20 (MST): &quot;Undefined index:  user&quot; in file /var/www/elgg/engine/lib/elgglib.php (line 62)
[07-Mar-2009 14:27:20] DEBUG: 2009-03-07 14:27:20 (MST): &quot;Undefined index:  pass&quot; in file /var/www/elgg/engine/lib/elgglib.php (line 62)
[07-Mar-2009 14:27:20] ***************** DB PROFILING ********************
[07-Mar-2009 14:27:20] 1 times: &#39;SELECT * from elggdatalists&#39;
[07-Mar-2009 14:27:20] 1 times: &#39;SELECT * from elggentities where guid=1 and (  (access_id in (2) or (owner_guid = -1) or (access_id = 0 and owner_guid = -1)) and enabled=&#39;yes&#39;)&#39;
...
[07-Mar-2009 14:27:20] 2 times: &#39;update elggmetadata set access_id = 2 where entity_guid = 1&#39;
[07-Mar-2009 14:27:20] 1 times: &#39;UPDATE elggentities set owner_guid=&#39;0&#39;, access_id=&#39;2&#39;, container_guid=&#39;0&#39;, time_updated=&#39;1236461868&#39; WHERE guid=1&#39;
[07-Mar-2009 14:27:20] 1 times: &#39;SELECT guid from elggsites_entity where guid = 1&#39;
[07-Mar-2009 14:27:20] 1 times: &#39;UPDATE elggsites_entity set name=&#39;3124/944&#39;, description=&#39;&#39;, url=&#39;http://example.org/&#39; where guid=1&#39;
[07-Mar-2009 14:27:20] 1 times: &#39;UPDATE elggusers_entity set prev_last_action = last_action, last_action = 1236461868 where guid = 2&#39;
[07-Mar-2009 14:27:20] DB Queries for this page: 56
[07-Mar-2009 14:27:20] ***************************************************
[07-Mar-2009 14:27:20] Page /action/admin/site/update_basic generated in 0.36997294426 seconds
</pre></div>
</div>
</div>
</div>
<div class="section" id="what-events-are-triggered-on-every-page-load">
<h3><a class="toc-backref" href="#id41">What events are triggered on every page load?</a><a class="headerlink" href="#what-events-are-triggered-on-every-page-load" title="Permalink to this headline">¶</a></h3>
<p>There are 5 <a class="reference internal" href="../design/events.html"><em>Elgg events</em></a> that are triggered on every page load:</p>
<ol class="arabic simple">
<li>boot, system</li>
<li>plugins_boot, system</li>
<li>init, system</li>
<li>pagesetup, system</li>
<li>shutdown, system</li>
</ol>
<p>The <em>boot</em>, <em>system</em> event is triggered before the plugins get loaded. There does not appear to be any difference between the timing of the next two events: <em>plugins_boot</em>, <em>system</em> and <em>init</em>, <em>system</em> so plugins tend to use <em>init</em>, <em>system</em>. This event is triggered just after the plugins are loaded near the end of the boot script (<code class="docutils literal"><span class="pre">/engine/start.php</span></code>). The <em>pagesetup</em>, <em>system</em> event is thrown the first time <code class="docutils literal"><span class="pre">elgg_view()</span></code> is called. Some pages like the default <code class="docutils literal"><span class="pre">index.php</span></code> do not call <code class="docutils literal"><span class="pre">elgg_view()</span></code> so it is not triggered for them. The <em>shutdown</em>, <em>system</em> event is triggered after the page has been sent to the requester and is handled through the PHP function <code class="docutils literal"><span class="pre">register_shutdown_function()</span></code>.</p>
<p>There are <a class="reference internal" href="../guides/events-list.html"><em>other events</em></a> that are triggered by the Elgg core but they happen occasionally (such as when a user logs in).</p>
</div>
<div class="section" id="what-variables-are-reserved-by-elgg">
<h3><a class="toc-backref" href="#id42">What variables are reserved by Elgg?</a><a class="headerlink" href="#what-variables-are-reserved-by-elgg" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">$CONFIG</span></code></li>
<li><code class="docutils literal"><span class="pre">$vars</span></code></li>
<li><code class="docutils literal"><span class="pre">$autofeed</span></code></li>
<li><code class="docutils literal"><span class="pre">$_GET['action']</span></code> / <code class="docutils literal"><span class="pre">$_POST['action']</span></code></li>
<li><code class="docutils literal"><span class="pre">$viewtype</span></code></li>
</ul>
</div>
<div class="section" id="copy-a-plugin">
<h3><a class="toc-backref" href="#id43">Copy a plugin</a><a class="headerlink" href="#copy-a-plugin" title="Permalink to this headline">¶</a></h3>
<p>There are many questions asked about how to copy a plugin. Let&#8217;s say you want to copy the <code class="docutils literal"><span class="pre">blog</span></code> plugin in order to run one plugin called <code class="docutils literal"><span class="pre">blog</span></code> and another called <code class="docutils literal"><span class="pre">poetry</span></code>. This is not difficult but it does require a lot of work. You would need to</p>
<ul class="simple">
<li>change the directory name</li>
<li>change the names of every function (having two functions causes PHP to crash)</li>
<li>change the name of every view (so as not to override the views on the original plugin)</li>
<li>change any data model subtypes</li>
<li>change the language file</li>
<li>change anything else that was specific to the original plugin</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are trying to clone the <code class="docutils literal"><span class="pre">groups</span></code> plugin, you will have the additional difficulty that the group plugin does not set a subtype.</p>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="faqs/general.html" class="btn btn-neutral float-right" title="General">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Appendix"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, Various.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a modified version of the <a href="https://github.com/snide/sphinx_rtd_theme">Read the Docs theme</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.x',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
   

</body>
</html>