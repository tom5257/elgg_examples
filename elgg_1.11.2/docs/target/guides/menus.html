

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Menus &mdash; Elgg 1.x documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Elgg 1.x documentation" href="../index.html"/>
        <link rel="up" title="Developer Guides" href="index.html"/>
        <link rel="next" title="Notifications" href="notifications.html"/>
        <link rel="prev" title="JavaScript" href="javascript.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
        <a href="../index.html"><img src="../_static/elgg_logo.png" alt="Elgg" /></a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/features.html">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html">Bundled plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/license.html">License</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/install.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/development.html">Developer Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">Administrator Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../admin/getting_started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/upgrading.html">Upgrading Elgg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/plugins.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/performance.html">Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/cron.html">Cron</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/backup-restore.html">Backup and Restore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/duplicate-installation.html">Duplicate Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/getting-help.html">Getting Help</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="dont-modify-core.html">Don&#8217;t Modify Core</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="guidelines.html">Plugin coding guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="accessibility.html">Accessibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="ajax.html">Ajax</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="context.html">Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html">Forms + Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="helpers.html">Helper functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="i18n.html">Internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="javascript.html">JavaScript</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Menus</a></li>
<li class="toctree-l2"><a class="reference internal" href="notifications.html">Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="pagehandler.html">Page handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="page-owner.html">Page ownership</a></li>
<li class="toctree-l2"><a class="reference internal" href="permissions-check.html">Permissions Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html">Plugin settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="river.html">River</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing.html">Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="themes.html">Themes</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html">Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="widgets.html">Widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="walled-garden.html">Walled Garden</a></li>
<li class="toctree-l2"><a class="reference internal" href="web-services.html">Web services</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrading.html">Upgrading Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="events-list.html">List of events in core</a></li>
<li class="toctree-l2"><a class="reference internal" href="hooks-list.html">List of plugin hooks in core</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Plugin Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/hello_world.html">Hello world</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/indexpage.html">Customizing the Home Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/blog.html">Building a Blog Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/wysiwyg.html">Integrating a Rich Text Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/widget.html">Basic Widget</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Design Docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../design/actions.html">Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/database.html">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/events.html">Events and Plugin Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/i18n.html">Internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/amd.html">AMD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design/loggable.html">Loggable</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/index.html">Contributor Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contribute/i18n.html">Translations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/issues.html">Reporting Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/code.html">Writing Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/docs.html">Writing Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/docs.html#internationalizing-documentation">Internationalizing documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/money.html">Becoming a Financial Supporter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/releases.html">Release Process Workflow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/index.html">Appendix</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../appendix/faqs.html">FAQs and Other Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/roadmap.html">Roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/releases.html">Release Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/support.html">Support policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/history.html">History</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Elgg</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Developer Guides</a> &raquo;</li>
      
    <li>Menus</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/guides/menus.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="menus">
<h1>Menus<a class="headerlink" href="#menus" title="Permalink to this headline">¶</a></h1>
<p>Elgg contains helper code to build menus throughout the site.</p>
<p>Every single menu requires a name, as does every single menu item. These are
required in order to allow easy overriding and manipulation, as well as to
provide hooks for theming.</p>
<div class="contents local topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#basic-usage" id="id6">Basic usage</a></li>
<li><a class="reference internal" href="#advanced-usage" id="id7">Advanced usage</a></li>
<li><a class="reference internal" href="#creating-a-new-menu" id="id8">Creating a new menu</a></li>
<li><a class="reference internal" href="#theming" id="id9">Theming</a></li>
</ul>
</div>
<div class="section" id="basic-usage">
<h2><a class="toc-backref" href="#id6">Basic usage</a><a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>Basic functionalities can be achieved through these two functions:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://reference.elgg.org/engine_2lib_2navigation_8php.html#a344445364078d03607904c44bad36c1c">elgg_register_menu_item()</a> to add an item to a menu</li>
<li><a class="reference external" href="http://reference.elgg.org/engine_2lib_2navigation_8php.html#ae26ee09e330a130984c9a6f9e19f6546">elgg_unregister_menu_item()</a> to remove an item from a menu</li>
</ul>
</div></blockquote>
<p>You normally want to call them from your plugin&#8217;s init function.</p>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<div class="highlight-php"><div class="highlight"><pre><span class="x">// Add a new menu item to the site main menu</span>
<span class="x">elgg_register_menu_item(&#39;site&#39;, array(</span>
<span class="x">        &#39;name&#39; =&gt; &#39;itemname&#39;,</span>
<span class="x">        &#39;text&#39; =&gt; &#39;This is text of the item&#39;,</span>
<span class="x">        &#39;href&#39; =&gt; &#39;/item/url&#39;,</span>
<span class="x">));</span>
</pre></div>
</div>
<div class="code php highlight-python"><div class="highlight"><pre>// Remove the &quot;Elgg&quot; logo from the topbar menu
elgg_unregister_menu_item(&#39;topbar&#39;, &#39;elgg_logo&#39;);
</pre></div>
</div>
</div>
</div>
<div class="section" id="advanced-usage">
<h2><a class="toc-backref" href="#id7">Advanced usage</a><a class="headerlink" href="#advanced-usage" title="Permalink to this headline">¶</a></h2>
<p>You can get more control over menus by using <a class="reference internal" href="../design/events.html"><em>plugin hooks</em></a>
and the public methods provided by the <a class="reference external" href="http://reference.elgg.org/classElggMenuItem.html">ElggMenuItem</a> class.</p>
<dl class="docutils">
<dt>There are two hooks that can be used to modify a menu:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">'register',</span> <span class="pre">'menu:&lt;menu</span> <span class="pre">name&gt;'</span></code> to add or modify items (especially in dynamic menus)</li>
<li><code class="docutils literal"><span class="pre">'prepare',</span> <span class="pre">'menu:&lt;menu</span> <span class="pre">name&gt;'</span></code> to modify the structure of the menu before it is displayed</li>
</ul>
</dd>
</dl>
<p>When you register a plugin hook handler, replace the <code class="docutils literal"><span class="pre">&lt;menu</span> <span class="pre">name&gt;</span></code> part with the
internal name of the menu.</p>
<p>The third parameter passed into a menu handler contains all the menu items that
have been registered so far by Elgg core and other enabled plugins. In the
handler we can loop through the menu items and use the class methods to
interact with the properties of the menu item.</p>
<div class="section" id="id4">
<h3>Examples<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p><strong>Example 1:</strong> Change the URL for menu item called &#8220;albums&#8221; in the <code class="docutils literal"><span class="pre">owner_block</span></code> menu:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">/**</span>
<span class="x"> * Initialize the plugin</span>
<span class="x"> */</span>
<span class="x">function my_plugin_init() {</span>
<span class="x">        // Register a plugin hook handler for the owner_block menu</span>
<span class="x">        elgg_register_plugin_hook_handler(&#39;register&#39;, &#39;menu:owner_block&#39;, &#39;my_owner_block_menu_handler&#39;);</span>
<span class="x">}</span>

<span class="x">/**</span>
<span class="x"> * Change the URL of the &quot;Albums&quot; menu item in the owner_block menu</span>
<span class="x"> */</span>
<span class="x">function my_owner_block_menu_handler($hook, $type, $menu, $return) {</span>
<span class="x">        $owner = $params[&#39;entity&#39;];</span>

<span class="x">        // Owner can be either user or a group, so we</span>
<span class="x">        // need to take both URLs into consideration:</span>
<span class="x">        switch ($owner-&gt;getType()) {</span>
<span class="x">                case &#39;user&#39;:</span>
<span class="x">                        $url = &quot;album/owner/{$owner-&gt;guid}&quot;;</span>
<span class="x">                        break;</span>
<span class="x">                case &#39;group&#39;:</span>
<span class="x">                        $url = &quot;album/group/{$owner-&gt;guid}:</span>
<span class="x">                        break;</span>
<span class="x">        }</span>

<span class="x">        foreach ($menu as $key =&gt; $item) {</span>
<span class="x">                if ($item-&gt;getName() == &#39;albums&#39;) {</span>
<span class="x">                        // Set the new URL</span>
<span class="x">                        $item-&gt;setURL($url);</span>
<span class="x">                        break;</span>
<span class="x">                }</span>
<span class="x">        }</span>

<span class="x">        return $menu;</span>
<span class="x">}</span>
</pre></div>
</div>
<dl class="docutils">
<dt><strong>Example 2:</strong> Modify the <code class="docutils literal"><span class="pre">entity</span></code> menu for the <code class="docutils literal"><span class="pre">ElggBlog</span></code> objects</dt>
<dd><ul class="first last simple">
<li>Remove the thumb icon</li>
<li>Change the &#8220;Edit&#8221; text into a custom icon</li>
</ul>
</dd>
</dl>
<div class="highlight-php"><div class="highlight"><pre><span class="x">/**</span>
<span class="x"> * Initialize the plugin</span>
<span class="x"> */</span>
<span class="x">function my_plugin_init() {</span>
<span class="x">        // Register a plugin hook handler for the entity menu</span>
<span class="x">        elgg_register_plugin_hook_handler(&#39;register&#39;, &#39;menu:entity&#39;, &#39;my_entity_menu_handler&#39;);</span>
<span class="x">}</span>

<span class="x">/**</span>
<span class="x"> * Customize the entity menu for ElggBlog objects</span>
<span class="x"> */</span>
<span class="x">function my_entity_menu_handler($hook, $type, $menu, $params) {</span>
<span class="x">        // The entity can be found from the $params parameter</span>
<span class="x">        $entity = $params[&#39;entity&#39;];</span>

<span class="x">        // We want to modify only the ElggBlog objects, so we</span>
<span class="x">        // return immediately if the entity is something else</span>
<span class="x">        if (!$entity intanceof ElggBlog) {</span>
<span class="x">                return $menu;</span>
<span class="x">        }</span>

<span class="x">        foreach ($menu as $key =&gt; $item) {</span>
<span class="x">                switch ($item-&gt;getName()) {</span>
<span class="x">                        case &#39;likes&#39;:</span>
<span class="x">                                // Remove the &quot;likes&quot; menu item</span>
<span class="x">                                unset($menu[$key]);</span>
<span class="x">                                break;</span>
<span class="x">                        case &#39;edit&#39;:</span>
<span class="x">                                // Change the &quot;Edit&quot; text into a custom icon</span>
<span class="x">                                $item-&gt;setText(elgg_view_icon(&#39;pencil&#39;));</span>
<span class="x">                                break;</span>
<span class="x">                }</span>
<span class="x">        }</span>

<span class="x">        return $menu;</span>
<span class="x">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="creating-a-new-menu">
<h2><a class="toc-backref" href="#id8">Creating a new menu</a><a class="headerlink" href="#creating-a-new-menu" title="Permalink to this headline">¶</a></h2>
<p>Elgg provides multiple different menus by default. Sometimes you may however
need some menu items that don&#8217;t fit in any of the existing menus.
If this is the case, you can create your very own menu with the
<a class="reference external" href="http://reference.elgg.org/views_8php.html#ac2d475d3efbbec30603537013ac34e22">elgg_view_menu()</a> function. You must call the function from the view,
where you want to menu to be displayed.</p>
<p><strong>Example:</strong> Display a menu called &#8220;my_menu&#8221; that displays it&#8217;s menu items
in alphapetical order:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">echo elgg_view_menu(&#39;my_menu&#39;, array(&#39;sort_by&#39; =&gt; &#39;title&#39;));</span>
</pre></div>
</div>
<p>You can now add new items to the menu like this:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">elgg_register_menu_item(&#39;my_menu&#39;, array(</span>
<span class="x">        &#39;name&#39; =&gt; &#39;my_page&#39;,</span>
<span class="x">        &#39;href&#39; =&gt; &#39;path/to/my_page&#39;,</span>
<span class="x">        &#39;text&#39; =&gt; elgg_echo(&#39;my_plugin:my_page&#39;),</span>
<span class="x">));</span>
</pre></div>
</div>
<p>Furthermore it is now possible to modify the menu using the hooks
<code class="docutils literal"><span class="pre">'register',</span> <span class="pre">'menu:my_menu'</span></code> and <code class="docutils literal"><span class="pre">'prepare',</span> <span class="pre">'menu:my_menu'</span></code>.</p>
</div>
<div class="section" id="theming">
<h2><a class="toc-backref" href="#id9">Theming</a><a class="headerlink" href="#theming" title="Permalink to this headline">¶</a></h2>
<p>The menu name, section names, and item names are all embedded into the HTML as
CSS classes (normalized to contain only hyphens, rather that underscores or
colons). This increases the size of the markup slightly but provides themers
with a high degree of control and flexibility when styling the site.</p>
<p><strong>Example:</strong> The following would be the output of the <code class="docutils literal"><span class="pre">foo</span></code> menu with sections
<code class="docutils literal"><span class="pre">alt</span></code> and <code class="docutils literal"><span class="pre">default</span></code> containing items <code class="docutils literal"><span class="pre">baz</span></code> and <code class="docutils literal"><span class="pre">bar</span></code> respectively.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;elgg-menu elgg-menu-foo elgg-menu-foo-alt&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;elgg-menu-item elgg-menu-item-baz&quot;</span><span class="nt">&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;elgg-menu elgg-menu-foo elgg-menu-foo-default&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;elgg-menu-item elgg-menu-item-bar&quot;</span><span class="nt">&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="notifications.html" class="btn btn-neutral float-right" title="Notifications">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="javascript.html" class="btn btn-neutral" title="JavaScript"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, Various.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a modified version of the <a href="https://github.com/snide/sphinx_rtd_theme">Read the Docs theme</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.x',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
   

</body>
</html>